<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>System Info</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<style>
		body { font-family: Arial, sans-serif; background-color: #222; color: #fff; margin: 0; padding: 0; }
		.container { padding: 20px; max-width: 800px; margin: auto; }
		h1 { text-align: center; }
		table { width: 100%; margin: 20px 0; border-collapse: collapse; }
		th, td { padding: 8px 12px; border: 1px solid #444; text-align: left; }
		th { background-color: #333; }
		td { background-color: #444; }
		canvas { width: 100%; height: 300px; margin-top: 20px; }
	</style>
</head>
<body>
	<div class="container">
		<h1>System Information</h1>
		<table>
			<tr><th>OS</th><td id="os"></td></tr>
			<tr><th>Architecture</th><td id="arch"></td></tr>
			<tr><th>Hostname</th><td id="hostname"></td></tr>
			<tr><th>Uptime</th><td id="uptime"></td></tr>
			<tr><th>CPU</th><td id="cpu"></td></tr>
			<tr><th>Memory Total</th><td id="memTotal"></td></tr>
			<tr><th>Memory Used</th><td id="memUsed"></td></tr>
			<tr><th>Memory Free</th><td id="memFree"></td></tr>
		</table>
		<h2>Network Usage</h2>
		<canvas id="networkGraph"></canvas>
	</div>
	<script>
		function fetchSystemInfo() {
			fetch('/api/systeminfo')
				.then(response => response.json())
				.then(data => {
					document.getElementById('os').textContent = data.os;
					document.getElementById('arch').textContent = data.arch;
					document.getElementById('hostname').textContent = data.hostname;
					document.getElementById('uptime').textContent = data.uptime;
					document.getElementById('cpu').textContent = data.cpu;
					document.getElementById('memTotal').textContent = data.mem_total;
					document.getElementById('memUsed').textContent = data.mem_used;
					document.getElementById('memFree').textContent = data.mem_free;
					updateNetworkGraph(data.network);
				})
				.catch(error => console.error('Error fetching system info:', error));
		}
		function updateNetworkGraph(networkData) {
			const labels = networkData.map(iface => iface.name);
			const bytesSent = networkData.map(iface => iface.bytes_sent);
			const bytesRecv = networkData.map(iface => iface.bytes_recv);
			const ctx = document.getElementById('networkGraph').getContext('2d');
			const networkGraph = new Chart(ctx, {
				type: 'line',
				data: {
					labels: labels,
					datasets: [
						{
							label: 'Bytes Sent',
							data: bytesSent,
							borderColor: 'rgba(0, 123, 255, 1)',
							backgroundColor: 'rgba(0, 123, 255, 0.2)',
							fill: true,
						},
						{
							label: 'Bytes Received',
							data: bytesRecv,
							borderColor: 'rgba(40, 167, 69, 1)',
							backgroundColor: 'rgba(40, 167, 69, 0.2)',
							fill: true,
						}
					]
				},
				options: {
					scales: {
						y: {
							beginAtZero: true
						}
					}
				}
			});
		}
		setInterval(fetchSystemInfo, 5000);
		fetchSystemInfo();
	</script>
</body>
</html>
